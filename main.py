import chromadb
from openai import OpenAI
def openai_3_small(text):
    client = OpenAI(api_key="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")
    response = client.embeddings.create(
        input=text,
        model="text-embedding-3-small",

    )
    return response.data[0].embedding

client = chromadb.PersistentClient(path="C:/Users/axnm/PycharmProjects/colors_emb/chroma_shit")
# client.reset()
collection = client.get_or_create_collection(name="colors_of_words")

'''
documents = ['black','blue','banana','orange','brown','red','salad color','yellow']
collection.add(
    documents=documents,
    embeddings= [openai_3_small(doc) for doc in documents],
    ids = ['1','2','3','4','5','6','7','8']
)
'''

import torch
b = openai_3_small('red banana')
c = openai_3_small('banana')
b = torch.tensor(data=b)
c = torch.tensor(data=c)
d = c-b
d = d.tolist()

q = collection.query(
    query_embeddings=[d],
    n_results=8
)

print(q)





















































































































































































































































































































































































































































































































































































































































































